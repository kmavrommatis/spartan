In order to run spartan you need to have installed
tRNAScan-SE (
ARAGORN
infernal (v1.1)
hmmsearch
NCBI legacy blast (aka blastall)

The program has been tested under the following conditions:
- Detect RNA genes in finished genomes. In these cases the program detects consistently genes. (Escherichia colI)
- Detect RNA genes in finished genomes that contain introns. (Coxiella)
- Detect RNA genes at the ends of contigs (e.g. fragmented genes) (ACD.
- two files Coxiella_23S_withIntrons.fna, Ecoli_rRNA.fna contain mock sequences with introns and at the end of contigs
  In the corresponding directories the *.rRNA files contain the predictions from SPARTAN for all the input files.

The hmm models for 16S and 23S rRNAs were build by Jim Tripp (email HJTripp@lbl.gov)
The covariance models for 5S were build by Kostas Mavrommatis (email KMavrommatis@lbl.gov)
Test datasets were built by Jim Tripp (email HJTripp@lbl.gov)
Code was written by Kostas Mavrommatis. Modules of the code (Aragorn.pm) were modified from code written by Marcel Huntemann.

==== HOW TO RUN =========

Program: findtRNA.pl by Konstantinos Mavrommatis (KMavrommatis@lbl.gov)
Use this program to predict tRNA genes in bacterial, archaeal and eukaryotic genomes
Arguments:
	--input <input file>. Input file is in fasta format
	--gffout <output file>. The output file will be in gff format
	--domain <domain of organism>. The domain can be any combination of B, A, E for Bacteria, Archaea, Eukaryota respectively. Default BAE i.e. all
	--genometype <type of sequence>. The genome type can be any of metagenome, isolate. Default isolate.
	--notrnascan To prevent tRNAScan from predicting genes
	--noinfernal To prevent infernal from predicting genes
	--blast  To run blast for partial genes (This can increase run time significantly)
	--log <logfile> Default is input file with the extension .log
	--loglevel <[INFO], DEBUG, TRACE>
	--help This screen


the program runs trnascan, infernal, aragorn and blast to predict genes.
Aragorn is used only as an additional layer on top of infernal, i.e it is used to annotate infernal predictions since infernal does not predict the
anticodon of the gene. 
BLAST i used only in the terminal 150bp of each contig to search for fragments of genes that the other methods failed to detect.


Program: findrRNA.pl by Konstantinos Mavrommatis (KMavrommatis@lbl.gov)
Use this program to predict rRNA (23S, 16S, 5S) genes in bacterial, archaeal and eukaryotic genomes
Arguments:
	--input <input file>. Input file is in fasta format
	--gffout <output file>. The output file will be in gff format
	--rnatype <RNA type to search>. The RNA type can be a comma list of tsu, ssu, lsu for 5S, 16S, 23S respectively. Default 'tsu,ssu,lsu' i.e. all
	--domain <domain of organism>. The domain can be any combination of B, A, E for Bacteria, Archaea, Eukaryota respectively. Default BAE i.e. all
	--partial. To allow for partial gene prediction, i.e. genes located at the ends of contigs. [ default is look for full size genes ].
	--log <logfile> Default is input file with the extension .log
	--loglevel <[INFO], DEBUG, TRACE>
	--help This screen

the program compare the sequences to JGI developed HMM models for ssu and lsu and JGI developed covariance models for tsu.


==== INSTALLATION NOTES ============
Modify SetEnvironment.pm to indicate the location of the programs if they are not in the PATH
If you wish to use the tRNA blast option you need to build a non redundant database of full size tRNA genes from a set of genomes.


For convenience copies of the auxiliary software needed are included in the bundle of SPARTAN
For questions/comments on the usage of these tools please contact the corresponding authors.
This guide describes basic installation, for additional options please contact the corresponding authors.
======= Installation of Aragorn ==================

Server and downloads at http://mbio-serv2.mbioekol.lu.se/ARAGORN/

The tar ball only contains two files, the ARAGORN source
(aragorn1.2.36.c or similar) and a man page (aragorn.1). 
Uncompress with:

tar -xvzf aragorn1.2.36.tgz

Compiling example:

gcc -O3 -ffast-math -finline-functions -o aragorn aragorn1.2.36.c

Put the aragorn man page in a directory read by the man command. 
These directories may be listed by:

echo $MANPATH


======= Installation of trnascan ==================

http://lowelab.ucsc.edu/tRNAscan-SE/
download at
http://lowelab.ucsc.edu/software/tRNAscan-SE.tar.gz

unpack the provided tarball
$  tar -xvzf tRNAscan-SE.tar.gz

1) Edit the top of the Makefile. 
   Set the paths and other make variables to suit your system.

   In particular, you need to specify:
   1) where executables are to be installed
   2) where data files are to be installed 
   3) where Perl is already installed on the system
   4) what the Perl binary is called (i.e. 'perl' or 'perl5')
   5) where temporary files will reside 
   6) where to install man pages

2) type 'make' to build the programs

3) type 'make install' to install the programs and man pages.


4) type 'make testrun' to run tRNAscan-SE on a sample sequence; if the
program runs with no error messages, tRNAscan-SE has been installed
correctly

5) type 'make clean' to clean up.
